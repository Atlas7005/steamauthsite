<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Atlas's Accounts</title>
        <style type="text/css">
        	* {
        		margin: 0;
        		padding: 0;
                color: white;
        	}

        	html {
                font-family: Arial;
        		background-color: #171717;
                text-align: center;
        	}

        	body {
        		height: 100%;
        		width: 100%;
        	}

            ::selection {
                background-color: red;
            }

        	.accounts {
        		position: absolute;
        		left: 50%;
        		top: 15%;
        		transform: translateX(-50%);
        	}

        	.account {
                margin-top: 30%;
        		width: 155px;
        		height: 80px;
        		background-color: #121212;
        	}

            #atlas:hover {
                cursor: pointer;
            }

            #spark:hover {
                cursor: pointer;
            }

            .accountAtlasName, .accountSparkName {
                background-color: #0A0A0A;
            }

            .accountAtlasCode, .accountSparkCode {
                margin-top: 10%;
                font-size: 24px;
                display: inline-block;
            }
        </style>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.3.0/socket.io.js" integrity="sha512-v8ng/uGxkge3d1IJuEo6dJP8JViyvms0cly9pnbfRxT6/31c3dRWxIiwGnMSWwZjHKOuY3EVmijs7k1jz/9bLA==" crossorigin="anonymous"></script>
    	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog==" crossorigin="anonymous" />
    </head>
    <body>
    	<div class="accounts">
    		<div class="account">
    			<div class="accountAtlasName">lolAtlas</div>
    			<p class="accountAtlasCode"></p><i class="fas fa-clipboard" data-fa-transform="up-4" id="atlas"></i>
    		</div>
    		<div class="account">
    			<div class="accountSparkName">theeSpark</div>
    			<p class="accountSparkCode"></p><i class="fas fa-clipboard" data-fa-transform="up-4" id="spark"></i>
    		</div>
    	</div>

        <script type="text/javascript">
            /**
             * @todo Make accounts dynamic.
             * @body Add accounts dynamically using the api.
             */
        	const socket = io();

            var atlas = document.querySelector(".accountAtlasCode");
            var spark = document.querySelector(".accountSparkCode");
            var atlasClip = document.querySelector("#atlas");
            var sparkClip = document.querySelector("#spark");

            atlasClip.onclick = () => {
                copy(atlas.innerHTML);
            }

            sparkClip.onclick = () => {
                copy(spark.innerHTML);
            }

        	socket.on("code", (acc) => {
                if(acc.user.toLowerCase() == "lolatlas") {
                    atlas.innerHTML = acc.code;
                } else if(acc.user.toLowerCase() == "theespark") {
                    spark.innerHTML = acc.code;
                }
            });

            function copy(str) {
                const el = document.createElement('textarea');
                el.value = str;
                document.body.appendChild(el);
                el.select();
                document.execCommand('copy');
                document.body.removeChild(el);
            }
        </script>
    </body>
</html>